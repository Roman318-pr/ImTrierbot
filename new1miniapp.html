<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–¶–≤–µ—Ç–Ω—ã–µ —Ä—É–ª–µ—Ç–∫–∏ ¬∑ –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            padding: 16px;
            margin: 0;
        }
        .app-container {
            width: 100%;
            max-width: 420px;
            height: 100vh;
            max-height: 780px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            background: #000;
            border-radius: 24px 24px 0 0;
            overflow: hidden;
        }
        .wheels-area {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 28px;
            padding: 20px 12px 30px 12px;
            width: 100%;
        }
        .wheel {
            width: 100%;
            background: #0f0f0f;
            border-radius: 44px;
            padding: 14px 8px;
            border: 1px solid #2a2a2a;
        }
        .wheel-label {
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 0.8px;
            text-transform: uppercase;
            color: #aaa;
            margin-bottom: 10px;
            margin-left: 12px;
        }
        .card-scroll {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 6px 16px;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }
        .card-scroll::-webkit-scrollbar {
            display: none;
        }
        .color-card {
            flex: 0 0 auto;
            width: 90px;
            height: 110px;
            border-radius: 24px;
            background: #1e1e1e;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 6px 12px rgba(0,0,0,0.7);
            scroll-snap-align: center;
            border: 2px solid #333;
        }
        .color-preview {
            width: 50px;
            height: 50px;
            border-radius: 16px;
            margin-bottom: 10px;
            border: 2px solid #3d3d3d;
        }
        .color-name {
            font-size: 15px;
            font-weight: 600;
            text-transform: lowercase;
            background: rgba(0,0,0,0.5);
            padding: 4px 12px;
            border-radius: 40px;
            border: 1px solid #3a3a3a;
        }
        .bottom-nav {
            width: 100%;
            background: #0a0a0a;
            border-top: 1px solid #1f1f1f;
            border-radius: 30px 30px 0 0;
            padding: 16px 12px 24px 12px;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-around;
            align-items: center;
            gap: 8px;
        }
        .nav-btn {
            flex: 1;
            background: #121212;
            border: none;
            padding: 14px 0;
            font-size: 16px;
            font-weight: 600;
            color: #808080;
            text-align: center;
            border-radius: 40px;
            transition: color 0.1s ease;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }
        .nav-btn.active-nav {
            color: #ffffff !important;
            background: #2a2a2a;
        }
        .nav-btn:active {
            background: #2d2d2d;
        }
        .connection-status {
            color: #2ecc71;
            font-size: 10px;
            text-align: center;
            margin-top: 4px;
            letter-spacing: 0.5px;
        }
        @media (max-width: 380px) {
            .color-card {
                width: 75px;
                height: 100px;
            }
            .color-preview {
                width: 40px;
                height: 40px;
            }
        }
    </style>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Firebase SDK (–≤–µ—Ä—Å–∏—è 8.10.1) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
<div class="app-container">
    <div class="wheels-area">
        <!-- —Ä—É–ª–µ—Ç–∫–∞ 1 -->
        <div class="wheel">
            <div class="wheel-label">üé° —Ö–æ–ª–æ–¥–Ω—ã–µ ¬∑ –∫–æ–º–Ω–∞—Ç–∞</div>
            <div class="card-scroll" id="wheel1">
                <!-- –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–ø–æ–ª–Ω—è—Ç—Å—è —á–µ—Ä–µ–∑ js -->
            </div>
        </div>
        <!-- —Ä—É–ª–µ—Ç–∫–∞ 2 -->
        <div class="wheel">
            <div class="wheel-label">üé° —Ç—ë–ø–ª—ã–µ ¬∑ –∫–æ–º–Ω–∞—Ç–∞</div>
            <div class="card-scroll" id="wheel2">
                <!-- –∫–∞—Ä—Ç–æ—á–∫–∏ -->
            </div>
        </div>
        <div class="connection-status" id="status">üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –∏–≥—Ä–æ–∫–∞–º</div>
    </div>

    <div class="bottom-nav">
        <div class="nav-buttons" id="navContainer">
            <button class="nav-btn" data-nav="1">‚óè —Å–≤–æ—Ç—á</button>
            <button class="nav-btn" data-nav="2">‚ñ≤ –≥—Ä–∞–¥–∏–µ–Ω—Ç</button>
            <button class="nav-btn" data-nav="3">‚ñ† –ø–∞–ª–∏—Ç—Ä–∞</button>
            <button class="nav-btn" data-nav="4">‚òÖ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
        </div>
    </div>
</div>

<script>
    (function() {
        // ========== 1. –í–ê–®–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø FIREBASE ==========
       const firebaseConfig = {
            apiKey: "AIzaSyCYeELUnimdyjt0MRfNYfREkGfrt7gUnao",
            authDomain: "imtrierbot.firebaseapp.com",
            databaseURL: "https://imtrierbot-default-rtdb.firebaseio.com",
            projectId: "imtrierbot",
            storageBucket: "imtrierbot.firebasestorage.app",
            messagingSenderId: "1062476104894",
            appId: "1:1062476104894:web:e00869e054a5f3628e0aef",
            measurementId: "G-QC8TLBE3V2"
          };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä—É–ª–µ—Ç–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        const wheel1Ref = database.ref('wheel1/scrollPosition');
        const wheel2Ref = database.ref('wheel2/scrollPosition');

        // ========== 2. –î–ê–ù–ù–´–ï –î–õ–Ø –ö–ê–†–¢–û–ß–ï–ö ==========
        const coldColors = [
            { name: 'deep blue', hex: '#1E3A8A' },
            { name: 'cyan', hex: '#06B6D4' },
            { name: 'indigo', hex: '#4F46E5' },
            { name: 'teal', hex: '#14B8A6' },
            { name: 'sky', hex: '#0284C7' },
            { name: 'violet', hex: '#6D28D9' }
        ];

        const warmColors = [
            { name: 'coral', hex: '#F97316' },
            { name: 'amber', hex: '#F59E0B' },
            { name: 'red', hex: '#DC2626' },
            { name: 'pink', hex: '#EC4899' },
            { name: 'rose', hex: '#F43F5E' },
            { name: 'gold', hex: '#CA8A04' }
        ];

        // ========== 3. –ó–ê–ü–û–õ–ù–ï–ù–ò–ï –†–£–õ–ï–¢–û–ö ==========
        function fillWheel(containerId, colorsArray) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            // –°–æ–∑–¥–∞–µ–º 20 –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            for (let i = 0; i < 20; i++) {
                let col = colorsArray[i % colorsArray.length];
                let card = document.createElement('div');
                card.className = 'color-card';
                card.innerHTML = `<div class="color-preview" style="background:${col.hex};"></div>
                                  <span class="color-name">${col.name}</span>`;
                container.appendChild(card);
            }
        }
        fillWheel('wheel1', coldColors);
        fillWheel('wheel2', warmColors);

        // ========== 4. –ü–û–õ–£–ß–ê–ï–ú –≠–õ–ï–ú–ï–ù–¢–´ ==========
        const wheel1Element = document.getElementById('wheel1');
        const wheel2Element = document.getElementById('wheel2');

        // –§–ª–∞–≥–∏, —á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª (—Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ —Å–ª—É—à–∞–µ–º)
        let isUpdatingFromFirebase1 = false;
        let isUpdatingFromFirebase2 = false;

        // ========== 5. –°–õ–£–®–ê–ï–ú –°–ö–†–û–õ–õ –û–¢ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ==========
        function setupScrollListener(element, firebaseRef, updatingFlag) {
            if (!element) return;
            element.addEventListener('scroll', () => {
                // –ï—Å–ª–∏ —ç—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –∏–∑ Firebase ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É
                if (updatingFlag === 'wheel1' && isUpdatingFromFirebase1) return;
                if (updatingFlag === 'wheel2' && isUpdatingFromFirebase2) return;

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Å–∫—Ä–æ–ª–ª–∞ –≤ Firebase
                const position = element.scrollLeft;
                firebaseRef.set(position);
            });
        }

        setupScrollListener(wheel1Element, wheel1Ref, 'wheel1');
        setupScrollListener(wheel2Element, wheel2Ref, 'wheel2');

        // ========== 6. –°–õ–£–®–ê–ï–ú –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í FIREBASE ==========
        // –î–ª—è –ø–µ—Ä–≤–æ–π —Ä—É–ª–µ—Ç–∫–∏
        wheel1Ref.on('value', (snapshot) => {
            const position = snapshot.val();
            if (position !== null && wheel1Element) {
                isUpdatingFromFirebase1 = true;
                // –ü–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –¥–æ –ø–æ–∑–∏—Ü–∏–∏ –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
                wheel1Element.scrollTo({
                    left: position,
                    behavior: 'smooth'
                });
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
                setTimeout(() => { isUpdatingFromFirebase1 = false; }, 300);
            }
        });

        // –î–ª—è –≤—Ç–æ—Ä–æ–π —Ä—É–ª–µ—Ç–∫–∏
        wheel2Ref.on('value', (snapshot) => {
            const position = snapshot.val();
            if (position !== null && wheel2Element) {
                isUpdatingFromFirebase2 = true;
                wheel2Element.scrollTo({
                    left: position,
                    behavior: 'smooth'
                });
                setTimeout(() => { isUpdatingFromFirebase2 = false; }, 300);
            }
        });

        // ========== 7. –ù–ò–ñ–ù–ò–ï –ö–ù–û–ü–ö–ò ==========
        const navButtons = document.querySelectorAll('.nav-btn');
        function deactivateAll() {
            navButtons.forEach(btn => btn.classList.remove('active-nav'));
        }
        function handleNavClick(event) {
            const target = event.currentTarget;
            if (!target.classList.contains('active-nav')) {
                deactivateAll();
                target.classList.add('active-nav');
            }
        }
        navButtons.forEach(btn => {
            btn.addEventListener('click', handleNavClick);
        });
        if (navButtons.length > 0) {
            navButtons[0].classList.add('active-nav');
        }

        // ========== 8. –°–¢–ê–¢–£–° –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø ==========
        const connectedRef = database.ref('.info/connected');
        const statusDiv = document.getElementById('status');
        connectedRef.on('value', (snap) => {
            if (snap.val() === true) {
                statusDiv.innerHTML = 'üü¢ –î—Ä—É–≥–∏–µ –∏–≥—Ä–æ–∫–∏ –æ–Ω–ª–∞–π–Ω';
                statusDiv.style.color = '#2ecc71';
            } else {
                statusDiv.innerHTML = 'üî¥ –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...';
                statusDiv.style.color = '#e74c3c';
            }
        });
    })();
</script>
</body>
</html>

